<!DOCTYPE HTML>
<html>
    <head>
        <title>Academy & Resources - Paul The Analyst</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link rel="stylesheet" href="assets/css/main.css" />
        <style>
            /* Academy Section */
            #academy .courses {
                display: flex;
                justify-content: center;
                gap: 20px;
                margin-top: 20px;
            }

            #academy .course {
                background-color: #ffffff;
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                width: 300px;
                text-align: center;
            }

            /* Resources Section */
            #resources .resources-list {
                list-style: none;
                padding: 0;
            }

            #resources .resources-list li {
                margin: 10px 0;
            }

            /* Community Section */
            #community .actions {
                display: flex;
                justify-content: center;
                gap: 10px;
            }

            /* Quiz Section */
            #quiz .question {
                margin-bottom: 20px;
            }

            #quiz .question ul {
                list-style: none;
                padding: 0;
            }

            #quiz .question ul li {
                margin: 5px 0;
            }

            /* Quiz Result Popup - Clean Design */
            #quiz-result-popup {
                display: none;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 90%;
                max-width: 400px;
                background-color: #ffffff; /* Light background */
                color: #333333; /* Dark text */
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Subtle shadow */
                z-index: 1000;
                text-align: center;
            }

            #quiz-result-popup .quote-popup-content {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 20px;
            }

            #quiz-result-popup .quote-popup-content button {
                padding: 10px 20px;
                background-color: #4caf50; /* Green button */
                color: #ffffff;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
                transition: background-color 0.3s ease;
            }

            #quiz-result-popup .quote-popup-content button:hover {
                background-color: #388e3c; /* Darker green on hover */
            }

            #quiz-leaderboard {
                margin-top: 20px;
                padding: 10px;
                background-color: #f9f9f9;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            #quiz-leaderboard ul {
                list-style: none;
                padding: 0;
            }

            #quiz-leaderboard li {
                margin: 5px 0;
                font-size: 16px;
            }

            #quiz-corrections iframe {
                width: 100%;
                height: 300px;
                border: none;
                margin-top: 10px;
            }

            /* Quiz Section Styling */
            #quiz-container {
                margin-top: 20px;
                padding: 20px;
                background-color: #ffffff;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }
            #quiz-actions {
                margin-top: 20px;
                text-align: center;
            }
            #quiz-leaderboard, #quiz-corrections {
                margin-top: 30px;
                padding: 20px;
                background-color: #f9f9f9;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }
        </style>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-E680S7B2S1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-E680S7B2S1');
        </script>
    </head>
    <body class="is-preload">

        <!-- Wrapper -->
        <div id="wrapper">

            <!-- Main -->
            <div id="main">
                <div class="inner">

                    <!-- Header -->
                    <header id="header">
                        <a href="index.html" class="logo"><strong>Paul The Analyst</strong> - Academy & Resources</a>
                    </header>

                    <!-- Academy Section -->
                    <section id="academy">
                        <header class="major">
                            <h2>Paul The Analyst Academy</h2>
                        </header>
                        <div class="content">
                            <p>Learn data analytics from the ground up with our free and paid training programs. Whether you're a beginner or an advanced learner, we have something for you!</p>
                            <div class="courses">
                                <div class="course">
                                    <h3>Free Courses</h3>
                                    <p>Get started with data analytics for free. Learn the basics of Python, SQL, and Power BI.</p>
                                    <a href="#" class="button">Explore Free Courses</a>
                                </div>
                                <div class="course">
                                    <h3>Paid Courses</h3>
                                    <p>Take your skills to the next level with our advanced training programs. Learn from real-world projects and case studies.</p>
                                    <a href="#" class="button primary">Enroll in Paid Courses</a>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Quiz Section -->
                    <section id="quiz">
                        <header class="major">
                            <h2>Test Your Knowledge</h2>
                        </header>
                        <div class="content">
                            <p>Take this quick quiz to test your knowledge of data analytics. Challenge yourself and see how much you know!</p>
                            <div id="quiz-container">
                                <p>Loading quiz questions...</p>
                            </div>
                            <div id="quiz-actions" style="display: none;">
                                <button id="submit-quiz" class="button primary">Submit Answers</button>
                            </div>
                            <div id="quiz-leaderboard">
                                <h3>Top 5 Scores</h3>
                                <ul id="leaderboard-list"></ul>
                            </div>
                            <div id="quiz-corrections" style="display: none;">
                                <h3>Corrections</h3>
                                <div id="corrections-container"></div>
                                <iframe id="correction-iframe" style="width: 100%; height: 300px; border: none; margin-top: 10px;"></iframe>
                            </div>
                        </div>
                    </section>

                    <!-- Quiz Result Popup -->
                    <div id="quiz-result-popup" class="quote-popup">
                        <div class="quote-popup-content">
                            <p id="quiz-result-text"></p>
                            <button onclick="closeQuizResultPopup()">Close</button>
                        </div>
                    </div>

                    <!-- Community Section -->
                    <section id="community">
                        <header class="major">
                            <h2>Join Our Community</h2>
                        </header>
                        <div class="content">
                            <p>Be part of a growing community of data enthusiasts. Share insights, ask questions, and collaborate on exciting projects.</p>
                            <ul class="actions">
                                <li><a href="#" class="button">Join the Forum</a></li>
                                <li><a href="#" class="button">Sign Up for Events</a></li>
                                <li><a href="#" class="button">Subscribe to Newsletter</a></li>
                            </ul>
                        </div>
                    </section>

                    <!-- Resources Section -->
                    <section id="resources">
                        <header class="major">
                            <h2>Tools & Resources</h2>
                        </header>
                        <div class="content">
                            <p>Access free templates, tools, and resources to enhance your data analytics journey. Download and start using them today!</p>
                            <ul class="resources-list">
                                <li><a href="assets/templates/excel-dashboard-template.xlsx" download>Excel Dashboard Template</a></li>
                                <li><a href="assets/templates/sql-scripts.sql" download>SQL Scripts for Beginners</a></li>
                                <li><a href="https://powerbi.microsoft.com/" target="_blank">Power BI Official Website</a></li>
                                <li><a href="https://jupyter.org/" target="_blank">Jupyter Notebook</a></li>
                            </ul>
                        </div>
                    </section>

                </div>
            </div>

            <!-- Sidebar -->
            <div id="sidebar">
                <div class="inner">

                    <!-- Search -->
                    <section id="search" class="alt">
                        <form method="post" action="#">
                            <input type="text" name="query" id="query" placeholder="Search" />
                        </form>
                    </section>

                    <!-- Menu -->
                    <nav id="menu">
                        <header class="major">
                            <h2>Menu</h2>
                        </header>
                        <ul>
                            <li><a href="index.html">Homepage</a></li>
                            <li><a href="elements.html">Academy & Resources</a></li>
                            <li><a href="admin.html">Admin Dashboard</a></li>
                            <li>
                                <span class="opener">Submenu</span>
                                <ul>
                                    <li><a href="#free-courses">Free Courses</a></li>
                                    <li><a href="#paid-courses">Paid Courses</a></li>
                                    <li><a href="#community">Community Forum</a></li>
                                    <li><a href="#events">Events</a></li>
                                </ul>
                            </li>
                            <li><a href="#quiz">Test Your Knowledge</a></li>
                            <li><a href="#resources">Tools & Resources</a></li>
                            <li><a href="#contact">Contact</a></li>
                        </ul>
                    </nav>

                    <!-- Footer -->
                    <footer id="footer">
                        <p class="copyright">&copy; Paul The Analyst. All rights reserved.</p>
                    </footer>

                </div>
            </div>

        </div>

        <!-- Scripts -->
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/browser.min.js"></script>
        <script src="assets/js/breakpoints.min.js"></script>
        <script src="assets/js/util.js"></script>
        <script src="assets/js/main.js"></script>
        <script>
            // Fetch quiz questions from Open Trivia Database API
            const quizContainer = document.getElementById('quiz-container');
            const quizActions = document.getElementById('quiz-actions');
            const quizResultPopup = document.getElementById('quiz-result-popup');
            const quizResultText = document.getElementById('quiz-result-text');
            const leaderboardList = document.getElementById('leaderboard-list');
            const correctionsContainer = document.getElementById('corrections-container');
            let quizQuestions = [];
            let userAnswers = [];
            let leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];

            // Fetch questions from API
            function loadQuizQuestions() {
                fetch('https://opentdb.com/api.php?amount=10&category=18&type=multiple') // Category 18: Science: Computers
                    .then(response => response.json())
                    .then(data => {
                        quizQuestions = data.results;
                        displayQuizQuestions();
                    })
                    .catch(error => {
                        quizContainer.innerHTML = '<p>Failed to load quiz questions. Please try again later.</p>';
                        console.error('Error fetching quiz questions:', error);
                    });
            }

            // Display quiz questions
            function displayQuizQuestions() {
                quizContainer.innerHTML = '';
                quizQuestions.forEach((question, index) => {
                    const answers = [...question.incorrect_answers, question.correct_answer];
                    answers.sort(() => Math.random() - 0.5); // Shuffle answers

                    const questionHTML = `
                        <div class="question">
                            <h3>${index + 1}. ${question.question}</h3>
                            <ul>
                                ${answers
                                    .map(
                                        (answer, i) =>
                                            `<li>
                                                <input type="radio" name="q${index}" id="q${index}a${i}" value="${answer}" aria-label="Answer ${i + 1}: ${answer}">
                                                <label for="q${index}a${i}">${answer}</label>
                                            </li>`
                                    )
                                    .join('')}
                            </ul>
                        </div>
                    `;
                    quizContainer.innerHTML += questionHTML;
                });

                quizActions.style.display = 'block';
            }

            // Submit quiz and calculate score
            document.getElementById('submit-quiz').addEventListener('click', () => {
                userAnswers = [];
                quizQuestions.forEach((question, index) => {
                    const selectedAnswer = document.querySelector(`input[name="q${index}"]:checked`);
                    userAnswers.push(selectedAnswer ? selectedAnswer.value : null);
                });

                calculateQuizScore();
            });

            // Sanitize URL
            function sanitizeUrl(text) {
                return text.replace(/[^a-zA-Z0-9]/g, '-').toLowerCase();
            }

            // Calculate quiz score
            function calculateQuizScore() {
                let score = 0;
                correctionsContainer.innerHTML = ''; // Clear previous corrections

                quizQuestions.forEach((question, index) => {
                    if (userAnswers[index] === question.correct_answer) {
                        score++;
                    } else {
                        // Add correction with iframe link
                        const sanitizedAnswer = sanitizeUrl(question.correct_answer);
                        const correctionHTML = `
                            <p>
                                <strong>Question ${index + 1}:</strong> ${question.question}<br>
                                <strong>Correct Answer:</strong> ${question.correct_answer}<br>
                                <a href="#" onclick="loadCorrection('https://www.masterblogspot.wordpress.com/${sanitizedAnswer}')">Learn More</a>
                            </p>
                        `;
                        correctionsContainer.innerHTML += correctionHTML;
                    }
                });

                updateLeaderboard(score);
                showQuizResultPopup(score, quizQuestions.length);
            }

            function loadCorrection(url) {
                document.getElementById('correction-iframe').src = url;
            }

            // Update leaderboard
            function updateLeaderboard(score) {
                leaderboard.push(score);
                leaderboard.sort((a, b) => b - a); // Sort scores in descending order
                leaderboard = leaderboard.slice(0, 5); // Keep top 5 scores
                localStorage.setItem('leaderboard', JSON.stringify(leaderboard));

                // Display leaderboard
                leaderboardList.innerHTML = leaderboard
                    .map((score, index) => `<li>${index + 1}. Score: ${score}</li>`)
                    .join('');
            }

            // Show quiz result popup
            function showQuizResultPopup(score, total) {
                quizResultText.innerHTML = `
                    You scored ${score} out of ${total}. ${
                    score / total >= 0.8
                        ? 'Great job!'
                        : score / total >= 0.5
                        ? 'Good effort!'
                        : 'Keep practicing!'
                }
                `;
                quizResultPopup.style.display = 'block';

                // Show corrections
                document.getElementById('quiz-corrections').style.display = 'block';
            }

            // Close quiz result popup
            function closeQuizResultPopup() {
                quizResultPopup.style.display = 'none';
            }

            // Load quiz questions on page load
            window.onload = () => {
                loadQuizQuestions();
                updateLeaderboard(0); // Initialize leaderboard
            };
        </script>
    </body>
</html>